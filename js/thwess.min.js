var Display=function(b,d){var c=b,a=d;return{update:function(e,f){c=e;a=f},getWidth:function(){return c},getHeight:function(){return a}}};var display=new Display(document.body.offsetWidth,document.body.offsetHeight);$(document).ready(function(){sky=new makeSky(parseInt($(window).width()),parseInt($("article.titulo").height()-5));alignBox()});$(window).resize(function(){display.update(this.innerWidth,this.innerHeight);sky.fixSky(display.getWidth());alignBox()});$("ul.indice li.opcao h2").click(function(){if($(this).attr("class")!=="current"){$(this).parents("li.opcao").siblings("li.opcao").find("h2").css({width:"auto"}).removeClass("current").siblings().css({display:"none"});$(this).css({width:"100%"}).addClass("current").siblings().css({display:"table"})}else{$(this).css({width:"auto"}).removeClass("current").siblings().css({display:"none"})}});$("section.box article ul li h5").click(function(){if($(this).siblings("a").css("display")!=="table"){$(this).parents("li").siblings("li").find("h5").removeClass("current").siblings("a").removeClass("current");$(this).addClass("current").siblings("a").addClass("current")}else{$(this).removeClass("current").siblings("a").removeClass("current")}});$("section.box article header, section.box article header h4").mouseover(function(){$(this).find("h4").stop().animate({bottom:"0"},200)});$("section.box article header, section.box article header h4").mouseout(function(){$(this).find("h4").stop().animate({bottom:"-38"},200)});var media=window.matchMedia("print");media.addListener(triggerPrint);var Scenario=function(c){var a=c.getHours()*60+c.getMinutes(),d={backgroundSky:"white",edgeCloud:"#48AFB7",backgroundCloud:"white",color:"#ef4135"},b={backgroundSky:"white",edgeCloud:"#ef4135",backgroundCloud:"white",color:"#48AFB7"};return{formatScenario:function(){if(a>1110||a<390){return b}else{return d}}}};var sky=null,numberBlobs=30,radiusBlobs=30,edgeWidth=2,initialVelocity=0.7,ballContainer=null,edgeContainer=null,cloudContainer=null,ballList=[];var Assets=function(){return{newBall:function(a,e,b,d,c){return new Kinetic.Circle({x:a,y:e,fill:c.backgroundCloud,radius:b})},newEdge:function(a,e,b,d,c){return new Kinetic.Circle({x:a,y:e,stroke:c.edgeCloud,strokeWidth:d,radius:b})}}},makeSky=function(c,k){var b=10;bodyStage=new Kinetic.Stage({container:"sky",width:c+b,height:k+b}),bodyLayer=new Kinetic.Layer();scenario=new Scenario(new Date()).formatScenario();$("#sky").css({"background-color":scenario.backgroundSky,"margin-left":(bodyStage.getWidth()/2)*(-1),"margin-top":(bodyStage.getHeight()/2)*(-1)});$("header.principal article.titulo").css({"border-color":scenario.color,color:scenario.color});asset=new Assets();ballContainer=new Kinetic.Group();edgeContainer=new Kinetic.Group();cloudContainer=new Kinetic.Group();for(var g=0;g<numberBlobs;g++){var e=null,d=null,a={},i=Math.random();var j=Math.random()*bodyStage.getWidth();var h=Math.random()*bodyStage.getHeight();if(i<0.5){i=1}a.mid={};a.mid.radius=radiusBlobs*i;a.mid.x=j;a.mid.y=h;a.small={};a.small.radius=a.mid.radius/2;a.small.y=h+a.mid.radius/2.5;a.small.xL=j-a.mid.radius;a.small.xR=j+a.mid.radius;e=asset.newBall(a.mid.x,a.mid.y,a.mid.radius,edgeWidth,scenario);d=asset.newEdge(a.mid.x,a.mid.y,a.mid.radius,edgeWidth,scenario);ballList.push({ball:e,edge:d,vx:initialVelocity});e=asset.newBall(a.small.xR,a.small.y,a.small.radius,edgeWidth,scenario);d=asset.newEdge(a.small.xR,a.small.y,a.small.radius,edgeWidth,scenario);ballList.push({ball:e,edge:d,vx:initialVelocity});e=asset.newBall(a.small.xL,a.small.y,a.small.radius,edgeWidth,scenario);d=asset.newEdge(a.small.xL,a.small.y,a.small.radius,edgeWidth,scenario);ballList.push({ball:e,edge:d,vx:initialVelocity})}ballList.forEach(function(l,m){ballContainer.add(l.ball);edgeContainer.add(l.edge)});bodyLayer.add(edgeContainer);bodyLayer.add(ballContainer);bodyStage.add(bodyLayer);var f=new Kinetic.Animation({func:function(o){for(var m=0;m<numberBlobs;m++){var l=ballList[m],n=l.ball.attrs.x+l.vx;if(n>bodyStage.getWidth()+40){n=-radiusBlobs}l.ball.setX(n);l.edge.setX(n);if(l.vx<0.00001){l.vx=Math.random()*initialVelocity}}},node:bodyLayer});f.start();return{getStage:function(){return bodyStage},getLayer:function(){return bodyLayer},fixSky:function(l){sky.getStage().setWidth(l+b);$("#sky").css({"margin-left":(bodyStage.getWidth()/2)*(-1)})}}};